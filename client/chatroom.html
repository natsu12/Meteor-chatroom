<head>
	<title>Chat Room</title>
</head>
 
<body>
	<div class="container">
		<div class="page-header">
			<h1>Welcome to Chatroom!</h1>
			{{> loginButtons }}
		</div>

  		{{#if currentUser}}
  		<div class="row">
  			<div class="col-md-4 col-md-push-8">
				<div class="friendlist">
					<h2>Friends List</h2>
					<div class="panel panel-default">
						<ul>
							{{#each friends}}
								{{> friend}}
							{{/each}}
						</ul>
					</div>
					<form class="new-friend">
						<id class="input-group">
							<input type="text" class="form-control" name="text" autocomplete="off" placeholder="Add a new friend">
							<span class="input-group-btn">
								<input type="submit" class="btn btn-primary" value="Add">
							</span>
						</id>

						<p class="errormessage">{{errorFriend}}</p>
					</form>

				</div>
			</div>

  			<div class="col-md-8 col-md-pull-4">
  				<h2>Chat Here!</h2>
  				<div class="panel panel-default">
  					<div id="chat-messages">
						<ul class="list-group">
							{{#each messages}}
								{{> message}}
							{{/each}}
						</ul>
					</div>
					
  				</div>
  				
  			</div>
  			
  		</div>
			
		<footer class="footer">
			<div class="row">
				<div class="col-md-8">
					<form class="new-message">
						<div class="input-group">
							<input type="text" class="form-control" name="text" autocomplete="off" placeholder="Type your message">
							<span class="input-group-btn">
								<input type="submit" class="btn btn-primary" value="Send">
							</span>
						</div>
						<p class="errormessage">{{errorMessage}}</p>
					</form>
				</div>
			</div>	
		</footer>

		{{/if}}

		{{#unless currentUser}}
			<h2 id="welcome">Please sign in to enter the chatroom.</h2>
		{{/unless}}
  	</div>
</body>


<template name="message">
	<li>
		<div id="time">{{createdAt}}</div>
		<div class="text"><strong>{{username}}:</strong><br>{{text}}</div>
	</li>
</template>

<template name="friend">
	<li class="friend">
		<span>{{friendName}}</span>
		<button class="delete">&times;</button>
	</li>
</template>
